(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{401:function(s,t,e){"use strict";e.r(t);var a=e(29),n=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"routes-de-chargement-paresseux"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#routes-de-chargement-paresseux"}},[s._v("#")]),s._v(" Routes de chargement paresseux")]),s._v(" "),e("p",[s._v("Lors de la création d'applications avec un bundler, le bundle JavaScript peut devenir assez volumineux et affecter ainsi le temps de chargement de la page. Il serait plus efficace de diviser les composants de chaque route en morceaux séparés, et de ne les charger que lorsque la route est visitée.")]),s._v(" "),e("p",[s._v("Vue Router prend en charge les "),e("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import#Dynamic_Imports",target:"_blank",rel:"noopener noreferrer"}},[s._v("importations dynamiques"),e("OutboundLink")],1),s._v(" dès le départ, ce qui signifie que vous pouvez remplacer les importations statiques par des importations dynamiques :")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// remplacer")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// importation de UserDetails à partir de './views/UserDetails'.")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// avec")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("UserDetails")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./views/UserDetails'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" router "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("createRouter")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// ...")]),s._v("\n  routes"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" path"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'/users/:id'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" component"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" UserDetails "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("p",[s._v("L'option "),e("code",[s._v("component")]),s._v(" (et "),e("code",[s._v("components")]),s._v(") accepte une fonction qui renvoie une Promise d'un composant et Vue Router "),e("strong",[s._v("ne le récupérera que lorsqu'il entrera dans la page pour la première fois")]),s._v(", puis utilisera la version en cache. Ce qui signifie que vous pouvez aussi avoir des fonctions plus complexes tant qu'elles retournent une Promise :")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("UserDetails")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n  Promise"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("resolve")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/* définition du composant */")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("p",[s._v("En général, c'est une bonne idée "),e("strong",[s._v("de toujours utiliser les importations dynamiques")]),s._v(" pour toutes vos routes.")]),s._v(" "),e("div",{staticClass:"custom-block tip"},[e("p",{staticClass:"custom-block-title"},[s._v("Note")]),s._v(" "),e("p",[s._v("N'utilisez "),e("strong",[s._v("pas")]),s._v(" les "),e("a",{attrs:{href:"https://v3.vuejs.org/guide/component-dynamic-async.html#async-components",target:"_blank",rel:"noopener noreferrer"}},[s._v("composants asynchrones"),e("OutboundLink")],1),s._v(" pour les routes. Les composants asynchrones peuvent toujours être utilisés dans les composants de route, mais les composants de route eux-mêmes ne sont que des importations dynamiques.")])]),s._v(" "),e("p",[s._v("Si vous utilisez un bundler comme webpack, vous bénéficierez automatiquement de "),e("a",{attrs:{href:"https://webpack.js.org/guides/code-splitting/",target:"_blank",rel:"noopener noreferrer"}},[s._v("code splitting"),e("OutboundLink")],1),s._v(".")]),s._v(" "),e("p",[s._v("Si vous utilisez Babel, vous devrez ajouter le plugin "),e("a",{attrs:{href:"https://babeljs.io/docs/plugins/syntax-dynamic-import/",target:"_blank",rel:"noopener noreferrer"}},[s._v("syntax-dynamic-import"),e("OutboundLink")],1),s._v(" pour que Babel puisse analyser correctement la syntaxe.")]),s._v(" "),e("h2",{attrs:{id:"regroupement-des-composants-dans-le-meme-chunk"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#regroupement-des-composants-dans-le-meme-chunk"}},[s._v("#")]),s._v(" Regroupement des composants dans le même chunk")]),s._v(" "),e("p",[s._v("Parfois, nous pouvons vouloir regrouper tous les composants imbriqués sous la même route dans le même chunk asynchrone. Pour ce faire, nous devons utiliser "),e("a",{attrs:{href:"https://webpack.js.org/guides/code-splitting/#dynamic-imports",target:"_blank",rel:"noopener noreferrer"}},[s._v("named chunks"),e("OutboundLink")],1),s._v(" en fournissant un nom de chunk à l'aide d'une syntaxe de commentaire spéciale (nécessite webpack > 2.4) :")]),s._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("UserDetails")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/* webpackChunkName: "group-user" */')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./UserDetails.vue'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("UserDashboard")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/* webpackChunkName: "group-user" */')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./UserDashboard.vue'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("const")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[s._v("UserProfileEdit")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=>")]),s._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('/* webpackChunkName: "group-user" */')]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'./UserProfileEdit.vue'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])])]),e("p",[s._v("webpack regroupera tout module asynchrone ayant le même nom de chunk dans le même chunk asynchrone.")])])}),[],!1,null,null,null);t.default=n.exports}}]);