(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{420:function(t,a,s){"use strict";s.r(a);var e=s(29),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"migrating-from-vue-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#migrating-from-vue-2"}},[t._v("#")]),t._v(" Migrating from Vue 2")]),t._v(" "),s("p",[t._v("Most of Vue Router API has remained unchanged during its rewrite from v3 (for Vue 2) to v4 (for Vue 3) but there are still a few breaking changes that you might encounter while migrating your application. This guide is here to help you understand why these changes happened and how to adapt your application to make it work with Vue Router 4.")]),t._v(" "),s("h2",{attrs:{id:"breaking-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#breaking-changes"}},[t._v("#")]),t._v(" Breaking Changes")]),t._v(" "),s("p",[t._v("Changes are ordered by their usage. It is therefore recommended to follow this list in order.")]),t._v(" "),s("h3",{attrs:{id:"new-router-becomes-createrouter"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-router-becomes-createrouter"}},[t._v("#")]),t._v(" new Router becomes createRouter")]),t._v(" "),s("p",[t._v("Vue Router is no longer a class but a set of functions. Instead of writing "),s("code",[t._v("new Router()")]),t._v(", you now have to call "),s("code",[t._v("createRouter")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// previously was")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// import Router from 'vue-router'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createRouter "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ...")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"new-history-option-to-replace-mode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-history-option-to-replace-mode"}},[t._v("#")]),t._v(" New "),s("code",[t._v("history")]),t._v(" option to replace "),s("code",[t._v("mode")])]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("mode: 'history'")]),t._v(" option has been replaced with a more flexible one named "),s("code",[t._v("history")]),t._v(". Depending on which mode you were using, you will have to replace it with the appropriate function:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('"history"')]),t._v(": "),s("code",[t._v("createWebHistory()")])]),t._v(" "),s("li",[s("code",[t._v('"hash"')]),t._v(": "),s("code",[t._v("createWebHashHistory()")])]),t._v(" "),s("li",[s("code",[t._v('"abstract"')]),t._v(": "),s("code",[t._v("createMemoryHistory()")])])]),t._v(" "),s("p",[t._v("Here is a full snippet:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createWebHistory "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// there is also createWebHashHistory and createMemoryHistory")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  history"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWebHistory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  routes"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("On SSR, you need to manually pass the appropriate history:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// router.js")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" history "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" isServer "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createMemoryHistory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWebHistory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" router "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" routes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" history "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// somewhere in your server-entry.js")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// request url")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReady")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// resolve the request")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": enable tree shaking of non used histories as well as implementing custom histories for advanced use cases like native solutions.")]),t._v(" "),s("h3",{attrs:{id:"moved-the-base-option"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#moved-the-base-option"}},[t._v("#")]),t._v(" Moved the "),s("code",[t._v("base")]),t._v(" option")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("base")]),t._v(" option is now passed as the first argument to "),s("code",[t._v("createWebHistory")]),t._v(" (and other histories):")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createRouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createWebHistory "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'vue-router'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  history"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createWebHistory")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/base-directory/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  routes"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"removal-of-the-fallback-option"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-the-fallback-option"}},[t._v("#")]),t._v(" Removal of the "),s("code",[t._v("fallback")]),t._v(" option")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("fallback")]),t._v(" option is no longer supported when creating the router:")]),t._v(" "),s("div",{staticClass:"language-diff extra-class"},[s("pre",{pre:!0,attrs:{class:"language-diff"}},[s("code",[s("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[s("span",{pre:!0,attrs:{class:"token prefix deleted"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token line"}},[t._v("new VueRouter({\n")])]),s("span",{pre:!0,attrs:{class:"token inserted-sign inserted"}},[s("span",{pre:!0,attrs:{class:"token prefix inserted"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token line"}},[t._v("createRouter({\n")])]),s("span",{pre:!0,attrs:{class:"token deleted-sign deleted"}},[s("span",{pre:!0,attrs:{class:"token prefix deleted"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token line"}},[t._v("  fallback: false,\n")])]),t._v("// other options...\n})\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": All browsers supported by Vue support the "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/History_API",target:"_blank",rel:"noopener noreferrer"}},[t._v("HTML5 History API"),s("OutboundLink")],1),t._v(", allowing us to avoid hacks around modifying "),s("code",[t._v("location.hash")]),t._v(" and directly use "),s("code",[t._v("history.pushState()")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"removed-star-or-catch-all-routes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removed-star-or-catch-all-routes"}},[t._v("#")]),t._v(" Removed "),s("code",[t._v("*")]),t._v(" (star or catch all) routes")]),t._v(" "),s("p",[t._v("Catch all routes ("),s("code",[t._v("*")]),t._v(", "),s("code",[t._v("/*")]),t._v(") must now be defined using a parameter with a custom regex:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pathMatch is the name of the param, e.g., going to /not/found yields")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// { params: { pathMatch: ['not', 'found'] }}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this is thanks to the last *, meaning repeated params and it is necessary if you")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// plan on directly navigating to the not-found route using its name")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/:pathMatch(.*)*'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not-found'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" NotFound "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if you omit the last `*`, the `/` character in params will be encoded when resolving or pushing")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/:pathMatch(.*)'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bad-not-found'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" NotFound "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// bad example if using named routes:")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'bad-not-found'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pathMatch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not/found'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '/not%2Ffound'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// good example:")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not-found'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  params"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pathMatch"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'not'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'found'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '/not/found'")]),t._v("\n")])])]),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("You don't need to add the "),s("code",[t._v("*")]),t._v(" for repeated params if you don't plan to directly push to the not found route using its name. If you call "),s("code",[t._v("router.push('/not/found/url')")]),t._v(", it will provide the right "),s("code",[t._v("pathMatch")]),t._v(" param.")])]),t._v(" "),s("p",[s("strong",[t._v("Reason")]),t._v(": Vue Router doesn't use "),s("code",[t._v("path-to-regexp")]),t._v(" anymore, instead it implements its own parsing system that allows route ranking and enables dynamic routing. Since we usually add one single catch-all route per project, there is no big benefit in supporting a special syntax for "),s("code",[t._v("*")]),t._v(". The encoding of params is encoding across routes, without exception to make things easier to predict.")]),t._v(" "),s("h3",{attrs:{id:"replaced-onready-with-isready"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#replaced-onready-with-isready"}},[t._v("#")]),t._v(" Replaced "),s("code",[t._v("onReady")]),t._v(" with "),s("code",[t._v("isReady")])]),t._v(" "),s("p",[t._v("The existing "),s("code",[t._v("router.onReady()")]),t._v(" function has been replaced with "),s("code",[t._v("router.isReady()")]),t._v(" which doesn't take any argument and returns a Promise:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// replace")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("onReady")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("onSuccess"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" onError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReady")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("onSuccess"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("onError"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// or use await:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReady")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// onSuccess")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// onError")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"scrollbehavior-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#scrollbehavior-changes"}},[t._v("#")]),t._v(" "),s("code",[t._v("scrollBehavior")]),t._v(" changes")]),t._v(" "),s("p",[t._v("The object returned in "),s("code",[t._v("scrollBehavior")]),t._v(" is now similar to "),s("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/ScrollToOptions",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("ScrollToOptions")]),s("OutboundLink")],1),t._v(": "),s("code",[t._v("x")]),t._v(" is renamed to "),s("code",[t._v("left")]),t._v(" and "),s("code",[t._v("y")]),t._v(" is renamed to "),s("code",[t._v("top")]),t._v(". See "),s("a",{attrs:{href:"https://github.com/vuejs/rfcs/blob/master/active-rfcs/0035-router-scroll-position.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("Reason")]),t._v(": making the object similar to "),s("code",[t._v("ScrollToOptions")]),t._v(" to make it feel more familiar with native JS APIs and potentially enable future new options.")]),t._v(" "),s("h3",{attrs:{id:"router-view-keep-alive-and-transition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#router-view-keep-alive-and-transition"}},[t._v("#")]),t._v(" "),s("code",[t._v("<router-view>")]),t._v(", "),s("code",[t._v("<keep-alive>")]),t._v(", and "),s("code",[t._v("<transition>")])]),t._v(" "),s("p",[s("code",[t._v("transition")]),t._v(" and "),s("code",[t._v("keep-alive")]),t._v(" must now be used "),s("strong",[t._v("inside")]),t._v(" of "),s("code",[t._v("RouterView")]),t._v(" via the "),s("code",[t._v("v-slot")]),t._v(" API:")]),t._v(" "),s("div",{staticClass:"language-vue extra-class"},[s("pre",{pre:!0,attrs:{class:"language-vue"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-slot")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{ Component }"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("transition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("keep-alive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":is")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("keep-alive")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("transition")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": This was a necessary change. See the "),s("a",{attrs:{href:"https://github.com/vuejs/rfcs/blob/master/active-rfcs/0034-router-view-keep-alive-transitions.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("related RFC"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"removal-of-append-prop-in-router-link"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-append-prop-in-router-link"}},[t._v("#")]),t._v(" Removal of "),s("code",[t._v("append")]),t._v(" prop in "),s("code",[t._v("<router-link>")])]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("append")]),t._v(" prop has been removed from "),s("code",[t._v("<router-link>")]),t._v(". You can manually concatenate the value to an existing "),s("code",[t._v("path")]),t._v(" instead:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("replace\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("child-route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("append")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("to relative child"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-link")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nwith\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":to")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("append($route.path, "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v("child-route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("'")]),t._v(")"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  to relative child\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-link")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("You must define a global "),s("code",[t._v("append")]),t._v(" function on your "),s("em",[t._v("App")]),t._v(" instance:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("globalProperties"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("append")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pathToAppend")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n  path "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v(" pathToAppend\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": "),s("code",[t._v("append")]),t._v(" wasn't used very often, is easy to replicate in user land.")]),t._v(" "),s("h3",{attrs:{id:"removal-of-event-and-tag-props-in-router-link"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-event-and-tag-props-in-router-link"}},[t._v("#")]),t._v(" Removal of "),s("code",[t._v("event")]),t._v(" and "),s("code",[t._v("tag")]),t._v(" props in "),s("code",[t._v("<router-link>")])]),t._v(" "),s("p",[t._v("Both "),s("code",[t._v("event")]),t._v(", and "),s("code",[t._v("tag")]),t._v(" props have been removed from "),s("code",[t._v("<router-link>")]),t._v(". You can use the "),s("RouterLink",{attrs:{to:"/api/#router-link-s-v-slot"}},[s("code",[t._v("v-slot")]),t._v(" API")]),t._v(" to fully customize "),s("code",[t._v("<router-link>")]),t._v(":")],1),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[t._v("replace\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/about"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("tag")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("span"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("event")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dblclick"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("About Us"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-link")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\nwith\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-link")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("to")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/about"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("custom")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-slot")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{ navigate }"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("span")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@click")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navigate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("@keypress.enter")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("navigate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("role")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("link"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("About Us"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("span")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-link")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": These props were often used together to use something different from an "),s("code",[t._v("<a>")]),t._v(" tag but were introduced before the "),s("code",[t._v("v-slot")]),t._v(" API and are not used enough to justify adding to the bundle size for everybody.")]),t._v(" "),s("h3",{attrs:{id:"removal-of-the-exact-prop-in-router-link"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-the-exact-prop-in-router-link"}},[t._v("#")]),t._v(" Removal of the "),s("code",[t._v("exact")]),t._v(" prop in "),s("code",[t._v("<router-link>")])]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("exact")]),t._v(" prop has been removed because the caveat it was fixing is no longer present so you should be able to safely remove it. There are however two things you should be aware of:")]),t._v(" "),s("ul",[s("li",[t._v("Routes are now active based on the route records they represent instead of the generated route location objects and their "),s("code",[t._v("path")]),t._v(", "),s("code",[t._v("query")]),t._v(", and "),s("code",[t._v("hash")]),t._v(" properties")]),t._v(" "),s("li",[t._v("Only the "),s("code",[t._v("path")]),t._v(" section is matched, "),s("code",[t._v("query")]),t._v(", and "),s("code",[t._v("hash")]),t._v(" aren't taken into account anymore")])]),t._v(" "),s("p",[t._v("If you wish to customize this behavior, e.g. take into account the "),s("code",[t._v("hash")]),t._v(" section, you should use the "),s("a",{attrs:{href:"https://next.router.vuejs.org/api/#router-link-s-v-slot",target:"_blank",rel:"noopener noreferrer"}},[s("code",[t._v("v-slot")]),t._v(" API"),s("OutboundLink")],1),t._v(" to extend "),s("code",[t._v("<router-link>")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("Reason")]),t._v(": See the "),s("a",{attrs:{href:"https://github.com/vuejs/rfcs/blob/master/active-rfcs/0028-router-active-link.md#summary",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC about active matching"),s("OutboundLink")],1),t._v(" changes for more details.")]),t._v(" "),s("h3",{attrs:{id:"navigation-guards-in-mixins-are-ignored"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#navigation-guards-in-mixins-are-ignored"}},[t._v("#")]),t._v(" Navigation guards in mixins are ignored")]),t._v(" "),s("p",[t._v("At the moment navigation guards in mixins are not supported. You can track its support at "),s("a",{attrs:{href:"https://github.com/vuejs/vue-router-next/issues/454",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-router#454"),s("OutboundLink")],1),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"removal-of-router-match-and-changes-to-router-resolve"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-router-match-and-changes-to-router-resolve"}},[t._v("#")]),t._v(" Removal of "),s("code",[t._v("router.match")]),t._v(" and changes to "),s("code",[t._v("router.resolve")])]),t._v(" "),s("p",[t._v("Both "),s("code",[t._v("router.match")]),t._v(", and "),s("code",[t._v("router.resolve")]),t._v(" have been merged together into "),s("code",[t._v("router.resolve")]),t._v(" with a slightly different signature. "),s("RouterLink",{attrs:{to:"/api/#resolve"}},[t._v("Refer to the API")]),t._v(" for more details.")],1),t._v(" "),s("p",[s("strong",[t._v("Reason")]),t._v(": Uniting multiple methods that were used for the same purpose.")]),t._v(" "),s("h3",{attrs:{id:"removal-of-router-getmatchedcomponents"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-router-getmatchedcomponents"}},[t._v("#")]),t._v(" Removal of "),s("code",[t._v("router.getMatchedComponents()")])]),t._v(" "),s("p",[t._v("The method "),s("code",[t._v("router.getMatchedComponents")]),t._v(" is now removed as matched components can be retrieved from "),s("code",[t._v("router.currentRoute.value.matched")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("currentRoute"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("matched"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("flatMap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("record")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n  Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("record"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("components"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": This method was only used during SSR and is a one liner that can be done by the user.")]),t._v(" "),s("h3",{attrs:{id:"all-navigations-are-now-always-asynchronous"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#all-navigations-are-now-always-asynchronous"}},[t._v("#")]),t._v(" "),s("strong",[t._v("All")]),t._v(" navigations are now always asynchronous")]),t._v(" "),s("p",[t._v("All navigations, including the first one, are now asynchronous, meaning that, if you use a "),s("code",[t._v("transition")]),t._v(", you may need to wait for the router to be "),s("em",[t._v("ready")]),t._v(" before mounting the app:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Note: on Server Side, you need to manually push the initial location")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReady")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mount")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'#app'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("Otherwise there will be an initial transition as if you provided the "),s("code",[t._v("appear")]),t._v(" prop to "),s("code",[t._v("transition")]),t._v(" because the router displays its initial location (nothing) and then displays the first location.")]),t._v(" "),s("p",[t._v("Note that "),s("strong",[t._v("if you have navigation guards upon the initial navigation")]),t._v(", you might not want to block the app render until they are resolved unless you are doing Server Side Rendering. In this scenario, not waiting the router to be ready to mount the app would yield the same result as in Vue 2.")]),t._v(" "),s("h3",{attrs:{id:"removal-of-router-app"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-router-app"}},[t._v("#")]),t._v(" Removal of "),s("code",[t._v("router.app")])]),t._v(" "),s("p",[s("code",[t._v("router.app")]),t._v(" used to represent the last root component (Vue instance) that injected the router. Vue Router can now be safely used by multiple Vue applications at the same time. You can still add it when using the router:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("app"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app\n")])])]),s("p",[t._v("You can also extend the TypeScript definition of the "),s("code",[t._v("Router")]),t._v(" interface to add the "),s("code",[t._v("app")]),t._v(" property.")]),t._v(" "),s("p",[s("strong",[t._v("Reason")]),t._v(": Vue 3 applications do not exist in Vue 2 and now we properly support multiple applications using the same Router instance, so having an "),s("code",[t._v("app")]),t._v(" property would have been misleading because it would have been the application instead of the root instance.")]),t._v(" "),s("h3",{attrs:{id:"passing-content-to-route-components-slot"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#passing-content-to-route-components-slot"}},[t._v("#")]),t._v(" Passing content to route components' "),s("code",[t._v("<slot>")])]),t._v(" "),s("p",[t._v("Before you could directly pass a template to be rendered by a route components' "),s("code",[t._v("<slot>")]),t._v(" by nesting it under a "),s("code",[t._v("<router-view>")]),t._v(" component:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("In Vue Router 3, I render inside the route component"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("p",[t._v("Because of the introduction of the "),s("code",[t._v("v-slot")]),t._v(" api for "),s("code",[t._v("<router-view>")]),t._v(", you must pass it to the "),s("code",[t._v("<component>")]),t._v(" using the "),s("code",[t._v("v-slot")]),t._v(" API:")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("router-view")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("v-slot")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("{ Component }"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("component")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v(":is")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Component"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("In Vue Router 3, I render inside the route component"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("component")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("router-view")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"removal-of-parent-from-route-locations"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-parent-from-route-locations"}},[t._v("#")]),t._v(" Removal of "),s("code",[t._v("parent")]),t._v(" from route locations")]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("parent")]),t._v(" property has been removed from normalized route locations ("),s("code",[t._v("this.$route")]),t._v(" and object returned by "),s("code",[t._v("router.resolve")]),t._v("). You can still access it via the "),s("code",[t._v("matched")]),t._v(" array:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parent "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("matched"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("matched"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": Having "),s("code",[t._v("parent")]),t._v(" and "),s("code",[t._v("children")]),t._v(" creates unnecessary circular references while the properties could be retrieved already through "),s("code",[t._v("matched")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"removal-of-pathtoregexpoptions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-pathtoregexpoptions"}},[t._v("#")]),t._v(" Removal of "),s("code",[t._v("pathToRegexpOptions")])]),t._v(" "),s("p",[t._v("The "),s("code",[t._v("pathToRegexpOptions")]),t._v(" and "),s("code",[t._v("caseSensitive")]),t._v(" properties of route records have been replaced with "),s("code",[t._v("sensitive")]),t._v(" and "),s("code",[t._v("strict")]),t._v(" options for "),s("code",[t._v("createRouter()")]),t._v(". They can now also be directly passed when creating the router with "),s("code",[t._v("createRouter()")]),t._v(". Any other option specific to "),s("code",[t._v("path-to-regexp")]),t._v(" has been removed as "),s("code",[t._v("path-to-regexp")]),t._v(" is no longer used to parse paths.")]),t._v(" "),s("h3",{attrs:{id:"removal-of-unnamed-parameters"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#removal-of-unnamed-parameters"}},[t._v("#")]),t._v(" Removal of unnamed parameters")]),t._v(" "),s("p",[t._v("Due to the removal of "),s("code",[t._v("path-to-regexp")]),t._v(", unnamed parameters are no longer supported:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("/foo(/foo)?/suffix")]),t._v(" becomes "),s("code",[t._v("/foo/:_(foo)?/suffix")])]),t._v(" "),s("li",[s("code",[t._v("/foo(foo)?")]),t._v(" becomes "),s("code",[t._v("/foo:_(foo)?")])]),t._v(" "),s("li",[s("code",[t._v("/foo/(.*)")]),t._v(" becomes "),s("code",[t._v("/foo/:_(.*)")])])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("Note you can use any name instead of "),s("code",[t._v("_")]),t._v(" for the param. The point is to provide one.")])]),t._v(" "),s("h3",{attrs:{id:"usage-of-history-state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#usage-of-history-state"}},[t._v("#")]),t._v(" Usage of "),s("code",[t._v("history.state")])]),t._v(" "),s("p",[t._v("Vue Router saves information on the "),s("code",[t._v("history.state")]),t._v(". If you have any code manually calling "),s("code",[t._v("history.pushState()")]),t._v(", you should likely avoid it or refactor it with a regular "),s("code",[t._v("router.push()")]),t._v(" and a "),s("code",[t._v("history.replaceState()")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// replace")]),t._v("\nhistory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("pushState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("myState"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nhistory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replaceState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("myState "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("Similarly, if you were calling "),s("code",[t._v("history.replaceState()")]),t._v(" without preserving the current state, you will need to pass the current "),s("code",[t._v("history.state")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// replace")]),t._v("\nhistory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replaceState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// with")]),t._v("\nhistory"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("replaceState")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("history"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("state"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": We use the history state to save information about the navigation like the scroll position, previous location, etc.")]),t._v(" "),s("h3",{attrs:{id:"routes-option-is-required-in-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#routes-option-is-required-in-options"}},[t._v("#")]),t._v(" "),s("code",[t._v("routes")]),t._v(" option is required in "),s("code",[t._v("options")])]),t._v(" "),s("p",[t._v("The property "),s("code",[t._v("routes")]),t._v(" is now required in "),s("code",[t._v("options")]),t._v(".")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("createRouter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" routes"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": The router is designed to be created with routes even though you can add them later on. You need at least one route in most scenarios and this is written once per app in general.")]),t._v(" "),s("h3",{attrs:{id:"non-existent-named-routes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#non-existent-named-routes"}},[t._v("#")]),t._v(" Non existent named routes")]),t._v(" "),s("p",[t._v("Pushing or resolving a non existent named route throws an error:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Oops, we made a typo in name")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'homee'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// throws")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'homee'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// throws")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": Previously, the router would navigate to "),s("code",[t._v("/")]),t._v(" but display nothing (instead of the home page). Throwing an error makes more sense because we cannot produce a valid URL to navigate to.")]),t._v(" "),s("h3",{attrs:{id:"missing-required-params-on-named-routes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#missing-required-params-on-named-routes"}},[t._v("#")]),t._v(" Missing required "),s("code",[t._v("params")]),t._v(" on named routes")]),t._v(" "),s("p",[t._v("Pushing or resolving a named route without its required params will throw an error:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// given the following route:")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/users/:id'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UserDetails "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// Missing the `id` param will fail")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nrouter"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'user'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Reason")]),t._v(": Same as above.")]),t._v(" "),s("h3",{attrs:{id:"named-children-routes-with-an-empty-path-no-longer-appends-a-slash"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#named-children-routes-with-an-empty-path-no-longer-appends-a-slash"}},[t._v("#")]),t._v(" Named children routes with an empty "),s("code",[t._v("path")]),t._v(" no longer appends a slash")]),t._v(" "),s("p",[t._v("Given any nested named route with an empty "),s("code",[t._v("path")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/dashboard'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dashboard-parent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DashboardParent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    children"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dashboard'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DashboardDefault "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'settings'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dashboard-settings'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" DashboardSettings"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Navigating or resolving to the named route "),s("code",[t._v("dashboard")]),t._v(" will now produce a URL "),s("strong",[t._v("without a trailing slash")]),t._v(":")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[t._v("router"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'dashboard'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("href "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// '/dashboard'")]),t._v("\n")])])]),s("p",[t._v("This has an important side effect about children "),s("code",[t._v("redirect")]),t._v(" records like these:")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/parent'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Parent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    children"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this would now redirect to `/home` instead of `/parent/home`")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" redirect"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'home'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'home'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" component"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Home "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),s("p",[t._v("Note this will work if "),s("code",[t._v("path")]),t._v(" was "),s("code",[t._v("/parent/")]),t._v(" as the relative location "),s("code",[t._v("home")]),t._v(" to "),s("code",[t._v("/parent/")]),t._v(" is indeed "),s("code",[t._v("/parent/home")]),t._v(" but the relative location of "),s("code",[t._v("home")]),t._v(" to "),s("code",[t._v("/parent")]),t._v(" is "),s("code",[t._v("/home")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("Reason")]),t._v(": This is to make trailing slash behavior consistent: by default all routes allow a trailing slash. It can be disabled by using the "),s("code",[t._v("strict")]),t._v(" option and manually appending (or not) a slash to the routes.")]),t._v(" "),s("h3",{attrs:{id:"route-properties-encoding"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#route-properties-encoding"}},[t._v("#")]),t._v(" "),s("code",[t._v("$route")]),t._v(" properties Encoding")]),t._v(" "),s("p",[t._v("Decoded values in "),s("code",[t._v("params")]),t._v(", "),s("code",[t._v("query")]),t._v(", and "),s("code",[t._v("hash")]),t._v(" are now consistent no matter where the navigation is initiated (older browsers will still produce unencoded "),s("code",[t._v("path")]),t._v(" and "),s("code",[t._v("fullPath")]),t._v("). The initial navigation should yield the same results as in-app navigations.")]),t._v(" "),s("p",[t._v("Given any "),s("RouterLink",{attrs:{to:"/api/#routelocationnormalized"}},[t._v("normalized route location")]),t._v(":")],1),t._v(" "),s("ul",[s("li",[t._v("Values in "),s("code",[t._v("path")]),t._v(", "),s("code",[t._v("fullPath")]),t._v(" are not decoded anymore. They will appear as provided by the browser (most browsers provide them encoded). e.g. directly writing on the address bar "),s("code",[t._v("https://example.com/hello world")]),t._v(" will yield the encoded version: "),s("code",[t._v("https://example.com/hello%20world")]),t._v(" and both "),s("code",[t._v("path")]),t._v(" and "),s("code",[t._v("fullPath")]),t._v(" will be "),s("code",[t._v("/hello%20world")]),t._v(".")]),t._v(" "),s("li",[s("code",[t._v("hash")]),t._v(" is now decoded, that way it can be copied over: "),s("code",[t._v("router.push({ hash: $route.hash })")]),t._v(" and be used directly in "),s("RouterLink",{attrs:{to:"/api/#scrollbehavior"}},[t._v("scrollBehavior")]),t._v("'s "),s("code",[t._v("el")]),t._v(" option.")],1),t._v(" "),s("li",[t._v("When using "),s("code",[t._v("push")]),t._v(", "),s("code",[t._v("resolve")]),t._v(", and "),s("code",[t._v("replace")]),t._v(" and providing a "),s("code",[t._v("string")]),t._v(" location or a "),s("code",[t._v("path")]),t._v(" property in an object, "),s("strong",[t._v("it must be encoded")]),t._v(" (like in the previous version). On the other hand, "),s("code",[t._v("params")]),t._v(", "),s("code",[t._v("query")]),t._v(" and "),s("code",[t._v("hash")]),t._v(" must be provided in its unencoded version.")]),t._v(" "),s("li",[t._v("The slash character ("),s("code",[t._v("/")]),t._v(") is now properly decoded inside "),s("code",[t._v("params")]),t._v(" while still producing an encoded version on the URL: "),s("code",[t._v("%2F")]),t._v(".")])]),t._v(" "),s("p",[s("strong",[t._v("Reason")]),t._v(": This allows to easily copy existing properties of a location when calling "),s("code",[t._v("router.push()")]),t._v(" and "),s("code",[t._v("router.resolve()")]),t._v(", and make the resulting route location consistent across browsers. "),s("code",[t._v("router.push()")]),t._v(" is now idempotent, meaning that calling "),s("code",[t._v("router.push(route.fullPath)")]),t._v(", "),s("code",[t._v("router.push({ hash: route.hash })")]),t._v(", "),s("code",[t._v("router.push({ query: route.query })")]),t._v(", and "),s("code",[t._v("router.push({ params: route.params })")]),t._v(" will not create extra encoding.")]),t._v(" "),s("h3",{attrs:{id:"typescript-changes"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#typescript-changes"}},[t._v("#")]),t._v(" TypeScript changes")]),t._v(" "),s("p",[t._v("To make typings more consistent and expressive, some types have been renamed:")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[s("code",[t._v("vue-router@3")])]),t._v(" "),s("th",[s("code",[t._v("vue-router@4")])])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("RouteConfig")]),t._v(" "),s("td",[t._v("RouteRecordRaw")])]),t._v(" "),s("tr",[s("td",[t._v("Location")]),t._v(" "),s("td",[t._v("RouteLocation")])]),t._v(" "),s("tr",[s("td",[t._v("Route")]),t._v(" "),s("td",[t._v("RouteLocationNormalized")])])])]),t._v(" "),s("h2",{attrs:{id:"new-features"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#new-features"}},[t._v("#")]),t._v(" New Features")]),t._v(" "),s("p",[t._v("Some of new features to keep an eye on in Vue Router 4 include:")]),t._v(" "),s("ul",[s("li",[s("RouterLink",{attrs:{to:"/advanced/dynamic-routing.html"}},[t._v("Dynamic Routing")])],1),t._v(" "),s("li",[s("RouterLink",{attrs:{to:"/advanced/composition-api.html"}},[t._v("Composition API")])],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);