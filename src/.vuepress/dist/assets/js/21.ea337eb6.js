(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{407:function(t,s,e){"use strict";e.r(s);var a=e(29),n=Object(a.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"correspondance-dynamique-des-routes-avec-les-parametres"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#correspondance-dynamique-des-routes-avec-les-parametres"}},[t._v("#")]),t._v(" Correspondance dynamique des routes avec les paramètres")]),t._v(" "),e("p",[t._v("Très souvent, nous aurons besoin de faire correspondre des routes avec le modèle donné au même composant. Par exemple, nous pouvons avoir un composant "),e("code",[t._v("User")]),t._v(" qui doit être rendu pour tous les utilisateurs mais avec des identifiants différents. Dans Vue Router, nous pouvons utiliser un segment dynamique dans le chemin pour réaliser cela, nous l'appelons un "),e("em",[t._v("param")]),t._v(" :")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" User "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  template"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<div>User</div>'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ils sont passés à `createRouter`.")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// les segments dynamiques commencent par un deux-points")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/users/:id'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" component"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" User "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("p",[t._v("Maintenant, des URLs comme "),e("code",[t._v("/users/johnny")]),t._v(" et "),e("code",[t._v("/users/jolyne")]),t._v(" mèneront toutes deux à la même route.")]),t._v(" "),e("p",[t._v("Un "),e("em",[t._v("param")]),t._v(" est indiqué par deux points "),e("code",[t._v(":")]),t._v(". Lorsqu'une route est trouvée, la valeur de ses "),e("em",[t._v("paramètres")]),t._v(" sera exposée comme "),e("code",[t._v("this.$route.params")]),t._v(" dans chaque composant. Par conséquent, nous pouvons rendre l'ID de l'utilisateur actuel en mettant à jour le modèle de "),e("code",[t._v("User")]),t._v(" avec ceci :")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" User "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  template"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'<div>User {{ $route.params.id }}</div>'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Vous pouvez avoir plusieurs "),e("em",[t._v("params")]),t._v(" dans la même route, et ils correspondront aux champs correspondants dans "),e("code",[t._v("$route.params")]),t._v(". Exemples :")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("modèle")]),t._v(" "),e("th",[t._v("chemin correspondant")]),t._v(" "),e("th",[t._v("$route.params")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("/users/:username")]),t._v(" "),e("td",[t._v("/users/eduardo")]),t._v(" "),e("td",[e("code",[t._v("{ username: 'eduardo' }")])])]),t._v(" "),e("tr",[e("td",[t._v("/users/:username/posts/:postId")]),t._v(" "),e("td",[t._v("/users/eduardo/posts/123")]),t._v(" "),e("td",[e("code",[t._v("{ username: 'eduardo', postId: '123' }")])])])])]),t._v(" "),e("p",[t._v("En plus de "),e("code",[t._v("$route.params")]),t._v(", l'objet "),e("code",[t._v("$route")]),t._v(" expose également d'autres informations utiles telles que "),e("code",[t._v("$route.query")]),t._v(" (s'il y a une requête dans l'URL), "),e("code",[t._v("$route.hash")]),t._v(", etc. Vous pouvez consulter tous les détails dans la "),e("RouterLink",{attrs:{to:"/api/#routelocationnormalized"}},[t._v("Référence API")]),t._v(".")],1),t._v(" "),e("p",[t._v("Une démonstration fonctionnelle de cet exemple peut être trouvée "),e("a",{attrs:{href:"https://codesandbox.io/s/route-params-vue-router-examples-mlb14?from-embed&initialpath=%2Fusers%2Feduardo%2Fposts%2F1",target:"_blank",rel:"noopener noreferrer"}},[t._v("ici"),e("OutboundLink")],1),t._v(".")]),t._v(" "),e("h2",{attrs:{id:"reagir-aux-changements-de-parametres"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#reagir-aux-changements-de-parametres"}},[t._v("#")]),t._v(" Réagir aux changements de paramètres")]),t._v(" "),e("p",[t._v("Une chose à noter lors de l'utilisation de routes avec des paramètres est que lorsque l'utilisateur navigue de "),e("code",[t._v("/users/johnny")]),t._v(" à "),e("code",[t._v("/users/jolyne")]),t._v(", "),e("strong",[t._v("la même instance de composant sera réutilisée")]),t._v(". Comme les deux routes rendent le même composant, c'est plus efficace que de détruire l'ancienne instance et d'en créer une nouvelle. "),e("strong",[t._v("Cependant, cela signifie également que les hooks du cycle de vie du composant ne seront pas appelés")]),t._v(".")]),t._v(" "),e("p",[t._v("Pour réagir aux changements de paramètres dans le même composant, vous pouvez simplement surveiller n'importe quoi sur l'objet "),e("code",[t._v("$route")]),t._v(", dans ce scénario, le "),e("code",[t._v("$route.params")]),t._v(" :")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" User "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  template"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("created")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("$watch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("toParams"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" previousParams")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// réagir aux changements de route...")]),t._v("\n\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("Vous pouvez aussi utiliser le [garde de navigation] "),e("code",[t._v("beforeRouteUpdate")]),t._v("(../advanced/navigation-guards.md), qui permet également d'annuler la navigation :")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" User "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  template"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'...'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("beforeRouteUpdate")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")])]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// réagir aux changements de route...")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("userData "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchUser")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("to"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("h2",{attrs:{id:"catch-all-404-not-found-route"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#catch-all-404-not-found-route"}},[t._v("#")]),t._v(" Catch all / 404 Not found Route")]),t._v(" "),e("p",[t._v("Les paramètres réguliers ne correspondent qu'aux caractères situés entre les fragments d'url, séparés par des "),e("code",[t._v("/")]),t._v(". Si nous voulons faire correspondre "),e("strong",[t._v("tout")]),t._v(", nous pouvons utiliser une regexp "),e("em",[t._v("param")]),t._v(" personnalisée en ajoutant la regexp entre parenthèses juste après le "),e("em",[t._v("param")]),t._v(" :")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" routes "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// va tout faire correspondre et le mettre sous `$route.params.pathMatch`.")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/:pathMatch(.*)*'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NotFound'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" component"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" NotFound "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// correspondra à tout ce qui commence par `/user-` et le mettra sous `$route.params.afterUser`.")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" path"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/user-:afterUser(.*)'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" component"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" UserGeneric "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),e("p",[t._v("Dans ce scénario spécifique, nous utilisons un "),e("RouterLink",{attrs:{to:"/guide/essentials/route-matching-syntax.html#custom-regexp-in-params"}},[t._v("regexp personnalisé")]),t._v(" entre parenthèses et marquons le paramètre "),e("code",[t._v("pathMatch")]),t._v(" comme "),e("RouterLink",{attrs:{to:"/guide/essentials/route-matching-syntax.html#optional-parameters"}},[t._v("optional repeatable")]),t._v(". Cela nous permet de naviguer directement vers la route si nous en avons besoin en divisant le "),e("code",[t._v("path")]),t._v(" en un tableau :")],1),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$router"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'NotFound'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// conserve le chemin actuel et supprime le premier caractère pour éviter que l'URL cible ne commence par `//`.")]),t._v("\n  params"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" pathMatch"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("substring")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("split")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// préserver la requête existante et le hachage s'il y en a un")]),t._v("\n  query"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  hash"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$route"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),e("p",[t._v("Si vous utilisez "),e("RouterLink",{attrs:{to:"/guide/essentials/history-mode.html"}},[t._v("History mode")]),t._v(", veillez à suivre les instructions pour configurer correctement votre serveur.")],1),t._v(" "),e("h2",{attrs:{id:"patterns-de-correspondance-avances"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#patterns-de-correspondance-avances"}},[t._v("#")]),t._v(" Patterns de correspondance avancés")]),t._v(" "),e("p",[t._v("Vue Router utilise sa propre syntaxe de correspondance de chemin, inspirée de celle utilisée par "),e("code",[t._v("express")]),t._v(", il supporte donc de nombreux modèles de correspondance avancés tels que les paramètres optionnels, zéro ou plus / une ou plusieurs exigences, et même des modèles regex personnalisés. Veuillez consulter la documentation "),e("RouterLink",{attrs:{to:"/guide/essentials/route-matching-syntax.html"}},[t._v("Advanced Matching")]),t._v(" pour les explorer.")],1)])}),[],!1,null,null,null);s.default=n.exports}}]);